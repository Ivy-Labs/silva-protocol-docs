# Design Rationale
The fundamental challenge of scalability and interoperability between blockchains lies in the ability to globally perceive and securely verify a chain’s *finalized state*. Silva Protocol is designed around this insight, proposing a finality-centric approach to building a unified state service network. By standardizing commitments to finalized states, it aims to provide a secure foundation for both scaling and cross-chain interoperability. Once finality is established, it implies that the current state is irreversible and tamper-resistant, thereby serving as a reliable source of truth for offchain systems and other blockchains.

In blockchain systems, a chain’s finalized state is typically defined when a block is finalized through consensus. The `block_hash` of that block serves as a snapshot of the entire chain, encompassing transaction order, state transitions, execution results, and more. Specifically, the `state_root` enables the construction of state transition proofs for scaling scenarios, while the `receipt_root` enables execution verification of cross-chain transactions—forming the foundation of verifiable interoperability. The method of generating state transition proofs depends on the type of execution layer, falling primarily into two categories: ZK-based systems using zero-knowledge proofs, and OP-based systems using optimistic challenge mechanisms.

Silva Protocol is designed as a two-layer architecture comprising onchain contracts and offchain Silva network. The onchain component is primarily made up of the Silva Contract System, which handles validator management, fraud proofs, and slashing:

* The system adopts a Restake-based DPoS algorithm for validator selection: for each epoch (i.e., every *m* Ethereum blocks), the top *n* nodes by staking amount are selected as offchain validators. The contract system manages validator rotation and exit, ensuring dynamic security of the network.  
* Additionally, the onchain contracts include a fraud proof mechanism tailored for *Omnichain State Commitments (OSC)*, verifying whether offchain state confirmations are authentic. It is compatible with different consensus types: for BFT chains, it verifies the signature sets of finalized blocks; for PoW chains, it validates whether the proof-of-work meets the required difficulty; for scaling chains, it checks correctness of state transitions and enforces a no-fork commitment. To address extreme cases, the system includes an "escape hatch" that ensures users can recover their assets from onchain in the event of Silva network failure or sequencers failure.

The offchain layer consists of validator nodes selected by the onchain contracts, forming a consensus network that operates the asynchronous SilvaBFT algorithm using Ethereum block height as its logical clock. This consensus mechanism is an improvement over DiemBFT and operates in a three-layer structure:

1. **Fast Finality Layer**: Constructs independent partitions for each connected chain, enabling parallel operation and fast state finality confirmation. Outputs a *CoF (Certificate of Finality)* .

2. **Omnichain Snapshot Layer**: Periodically snapshots the finalized block heights (Partition Offsets) of each partition to generate a global network state.

3. **Omnichain State Commitment Layer**: Regularly aggregates finalized state data over a given time period into *OSC* packages, which will be published to Ethereum for public attestation and relayed to all connected chains, enabling inter-chain state synchronization and cross-chain verification.

Through this architecture, Silva Protocol provides finality confirmations within seconds (\~1s) to scaling chains, enabling their offchain states to be rapidly finalized and provable on the mainnet as both fork-free and valid in state transition. If a validator falsely signs a commitment to an incorrect or forked state, its staked assets are slashed, thus enhancing system security and reliability through economic incentives. Since this fraud proof and slashing mechanism runs on Ethereum, even if all Silva nodes collude, their funds will still be subject to slashing.

Furthermore, the *CoF* and *OSC* packages generated by Silva Protocol serve as foundational proofs for cross-chain interoperability. Chains can recognize and interact with each other based on *CoF/OSC*, enabling secure and low-cost state recognition and cross-chain function calls. This mechanism not only addresses the fragmentation issue across Ethereum Layer 2 networks, but also establishes a shared state channel with external blockchains—breaking the siloed nature of the blockchain ecosystem.